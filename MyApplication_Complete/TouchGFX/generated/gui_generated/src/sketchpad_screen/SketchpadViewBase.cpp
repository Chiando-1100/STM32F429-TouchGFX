/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/sketchpad_screen/SketchpadViewBase.hpp>
#include <touchgfx/canvas_widget_renderer/CanvasWidgetRenderer.hpp>
#include <touchgfx/Color.hpp>
#include <texts/TextKeysAndLanguages.hpp>
#include <images/BitmapDatabase.hpp>

SketchpadViewBase::SketchpadViewBase() :
    flexButtonCallback(this, &SketchpadViewBase::flexButtonCallbackHandler),
    sliderValueChangedCallback(this, &SketchpadViewBase::sliderValueChangedCallbackHandler)
{
    touchgfx::CanvasWidgetRenderer::setupBuffer(canvasBuffer, CANVAS_BUFFER_SIZE);

    __background.setPosition(0, 0, 240, 320);
    __background.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    add(__background);

    RedBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    RedBtn.setBorderSize(2);
    RedBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(255, 20, 20), touchgfx::Color::getColorFromRGB(84, 7, 7), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    RedBtn.setAction(flexButtonCallback);
    RedBtn.setPosition(0, 260, 30, 30);
    add(RedBtn);

    ClearBtn.setBoxWithBorderPosition(0, 0, 120, 30);
    ClearBtn.setBorderSize(3);
    ClearBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(0, 153, 204), touchgfx::Color::getColorFromRGB(79, 103, 255), touchgfx::Color::getColorFromRGB(51, 102, 153));
    ClearBtn.setText(TypedText(T___SINGLEUSE_WTTV));
    ClearBtn.setTextPosition(0, 0, 120, 30);
    ClearBtn.setTextColors(touchgfx::Color::getColorFromRGB(10, 10, 10), touchgfx::Color::getColorFromRGB(10, 10, 10));
    ClearBtn.setAction(flexButtonCallback);
    ClearBtn.setPosition(0, 290, 120, 30);
    add(ClearBtn);

    ReturnBtn.setBoxWithBorderPosition(0, 0, 120, 30);
    ReturnBtn.setBorderSize(3);
    ReturnBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(107, 242, 231), touchgfx::Color::getColorFromRGB(0, 153, 204), touchgfx::Color::getColorFromRGB(0, 70, 140), touchgfx::Color::getColorFromRGB(51, 102, 153));
    ReturnBtn.setText(TypedText(T_RETURNBTN));
    ReturnBtn.setTextPosition(0, 0, 120, 30);
    ReturnBtn.setTextColors(touchgfx::Color::getColorFromRGB(10, 10, 10), touchgfx::Color::getColorFromRGB(10, 10, 10));
    ReturnBtn.setAction(flexButtonCallback);
    ReturnBtn.setPosition(120, 290, 120, 30);
    add(ReturnBtn);

    YellowBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    YellowBtn.setBorderSize(2);
    YellowBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(255, 180, 5), touchgfx::Color::getColorFromRGB(99, 70, 1), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    YellowBtn.setAction(flexButtonCallback);
    YellowBtn.setPosition(60, 260, 30, 30);
    add(YellowBtn);

    GreenBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    GreenBtn.setBorderSize(2);
    GreenBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(49, 204, 77), touchgfx::Color::getColorFromRGB(2, 107, 41), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    GreenBtn.setAction(flexButtonCallback);
    GreenBtn.setPosition(90, 260, 30, 30);
    add(GreenBtn);

    PurpleBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    PurpleBtn.setBorderSize(2);
    PurpleBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(117, 70, 235), touchgfx::Color::getColorFromRGB(77, 44, 110), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    PurpleBtn.setAction(flexButtonCallback);
    PurpleBtn.setPosition(150, 260, 30, 30);
    add(PurpleBtn);

    BlackBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    BlackBtn.setBorderSize(2);
    BlackBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(13, 25, 31), touchgfx::Color::getColorFromRGB(0, 0, 0), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    BlackBtn.setAction(flexButtonCallback);
    BlackBtn.setPosition(180, 260, 30, 30);
    add(BlackBtn);

    BlueBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    BlueBtn.setBorderSize(2);
    BlueBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(77, 139, 255), touchgfx::Color::getColorFromRGB(1, 37, 105), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    BlueBtn.setAction(flexButtonCallback);
    BlueBtn.setPosition(120, 260, 30, 30);
    add(BlueBtn);

    OrangeBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    OrangeBtn.setBorderSize(2);
    OrangeBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(255, 107, 28), touchgfx::Color::getColorFromRGB(122, 41, 0), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    OrangeBtn.setAction(flexButtonCallback);
    OrangeBtn.setPosition(30, 260, 30, 30);
    add(OrangeBtn);

    sketchContainer1.setXY(0, 0);
    add(sketchContainer1);

    ColorChooseBtn.setBoxWithBorderPosition(0, 0, 30, 30);
    ColorChooseBtn.setBorderSize(3);
    ColorChooseBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(0, 102, 153), touchgfx::Color::getColorFromRGB(0, 50, 66), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(4, 49, 94));
    ColorChooseBtn.setText(TypedText(T___SINGLEUSE_71LZ));
    ColorChooseBtn.setTextPosition(0, 0, 30, 30);
    ColorChooseBtn.setTextColors(touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(10, 10, 10));
    ColorChooseBtn.setAction(flexButtonCallback);
    ColorChooseBtn.setPosition(210, 260, 30, 30);
    add(ColorChooseBtn);

    ColorSetmodalWindow.setBackground(touchgfx::BitmapId(BITMAP_ALTERNATE_THEME_IMAGES_CONTAINERS_MEDIUM_NARROW_OUTLINED_LIGHT_ID), 0, 25);
    ColorSetmodalWindow.setShadeColor(touchgfx::Color::getColorFromRGB(44, 62, 66));
    ColorSetmodalWindow.setShadeAlpha(130);
    ColorConfirmBtn.setBoxWithBorderPosition(0, 0, 100, 30);
    ColorConfirmBtn.setBorderSize(0);
    ColorConfirmBtn.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(0, 102, 153), touchgfx::Color::getColorFromRGB(0, 153, 204), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(51, 102, 153));
    ColorConfirmBtn.setText(TypedText(T_CONFIRMBTNTEXT));
    ColorConfirmBtn.setTextPosition(0, 0, 100, 30);
    ColorConfirmBtn.setTextColors(touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(10, 10, 10));
    ColorConfirmBtn.setAction(flexButtonCallback);
    ColorConfirmBtn.setPosition(70, 197, 100, 30);
    ColorSetmodalWindow.add(ColorConfirmBtn);

    GreenSlider.setXY(11, 92);
    GreenSlider.setBitmaps(touchgfx::Bitmap(BITMAP_BAR160X5_GREEN_TRACK_ID), touchgfx::Bitmap(BITMAP_BAR160X5_GREEN_FILLER_ID), touchgfx::Bitmap(BITMAP_ROUND_ACTIVE_GREEN_ID));
    GreenSlider.setupHorizontalSlider(12, 9, 0, 0, 160);
    GreenSlider.setValueRange(0, 255);
    GreenSlider.setValue(0);
    GreenSlider.setNewValueCallback(sliderValueChangedCallback);
    ColorSetmodalWindow.add(GreenSlider);

    Blueslider.setXY(11, 146);
    Blueslider.setBitmaps(touchgfx::Bitmap(BITMAP_BAR160X5_ID), touchgfx::Bitmap(BITMAP_BAR160X5_FILLER_ID), touchgfx::Bitmap(BITMAP_ALTERNATE_THEME_IMAGES_WIDGETS_SLIDER_HORIZONTAL_THIN_ROUND_ACTIVE_ID));
    Blueslider.setupHorizontalSlider(12, 9, 0, 0, 160);
    Blueslider.setValueRange(0, 255);
    Blueslider.setValue(0);
    Blueslider.setNewValueCallback(sliderValueChangedCallback);
    ColorSetmodalWindow.add(Blueslider);

    RedSlider.setXY(11, 38);
    RedSlider.setBitmaps(touchgfx::Bitmap(BITMAP_BAR160X5_RED_TRACK_ID), touchgfx::Bitmap(BITMAP_BAR160X5_RED_FILLER_ID), touchgfx::Bitmap(BITMAP_ROUND_ACTIVE_RED_ID));
    RedSlider.setupHorizontalSlider(12, 9, 0, 0, 160);
    RedSlider.setValueRange(0, 255);
    RedSlider.setValue(0);
    RedSlider.setNewValueCallback(sliderValueChangedCallback);
    ColorSetmodalWindow.add(RedSlider);

    RedValue.setPosition(188, 38, 39, 24);
    RedValue.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    RedValue.setLinespacing(0);
    Unicode::snprintf(RedValueBuffer, REDVALUE_SIZE, "%s", touchgfx::TypedText(T_REDVALUE).getText());
    RedValue.setWildcard(RedValueBuffer);
    RedValue.setTypedText(touchgfx::TypedText(T_RDV));
    ColorSetmodalWindow.add(RedValue);

    GreenValue.setPosition(188, 92, 39, 24);
    GreenValue.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    GreenValue.setLinespacing(0);
    Unicode::snprintf(GreenValueBuffer, GREENVALUE_SIZE, "%s", touchgfx::TypedText(T_GREENVALUE).getText());
    GreenValue.setWildcard(GreenValueBuffer);
    GreenValue.setTypedText(touchgfx::TypedText(T_GRV));
    ColorSetmodalWindow.add(GreenValue);

    BlueValue.setPosition(188, 146, 39, 24);
    BlueValue.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    BlueValue.setLinespacing(0);
    Unicode::snprintf(BlueValueBuffer, BLUEVALUE_SIZE, "%s", touchgfx::TypedText(T_BLUEVALUE).getText());
    BlueValue.setWildcard(BlueValueBuffer);
    BlueValue.setTypedText(touchgfx::TypedText(T_BLV));
    ColorSetmodalWindow.add(BlueValue);

    add(ColorSetmodalWindow);
}

SketchpadViewBase::~SketchpadViewBase()
{
    touchgfx::CanvasWidgetRenderer::resetBuffer();
}

void SketchpadViewBase::setupScreen()
{
    sketchContainer1.initialize();
    transitionBegins();
}

void SketchpadViewBase::flexButtonCallbackHandler(const touchgfx::AbstractButtonContainer& src)
{
    if (&src == &RedBtn)
    {
        //SetRedColor
        //When RedBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(255,10,10));
    }
    if (&src == &ClearBtn)
    {
        //ClearAct
        //When ClearBtn clicked execute C++ code
        //Execute C++ code
        presenter->clearSketch();
    }
    if (&src == &ReturnBtn)
    {
        //ReturnAct
        //When ReturnBtn clicked change screen to SelectScreen
        //Go to SelectScreen with screen transition towards North
        application().gotoSelectScreenScreenSlideTransitionNorth();
    }
    if (&src == &YellowBtn)
    {
        //SetYellowColor
        //When YellowBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(255,180,10));
    }
    if (&src == &GreenBtn)
    {
        //SetGreenColor
        //When GreenBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(50,220,77));
    }
    if (&src == &PurpleBtn)
    {
        //SetPurpleColor
        //When PurpleBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(120,50,240));
    }
    if (&src == &BlackBtn)
    {
        //SetBlackColor
        //When BlackBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(15,25,30));
    }
    if (&src == &OrangeBtn)
    {
        //SetOrangeColor
        //When OrangeBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(255,110,30));
    }
    if (&src == &BlueBtn)
    {
        //SetBlueColor
        //When BlueBtn clicked execute C++ code
        //Execute C++ code
        presenter->setSketchColor(touchgfx::Color::getColorFromRGB(70,120,250));
    }
    if (&src == &ColorChooseBtn)
    {
        //ColorSelectAct
        //When ColorChooseBtn clicked show ColorSetmodalWindow
        //Show ColorSetmodalWindow
        ColorSetmodalWindow.setVisible(true);
        ColorSetmodalWindow.invalidate();
    }
    if (&src == &ColorConfirmBtn)
    {
        //ConfirmColorRtn
        //When ColorConfirmBtn clicked hide ColorSetmodalWindow
        //Hide ColorSetmodalWindow
        ColorSetmodalWindow.setVisible(false);
        ColorSetmodalWindow.invalidate();
        //ConfirmColorCode
        //When ColorConfirmBtn clicked execute C++ code
        //Execute C++ code
        ColorChooseBtn.setBoxWithBorderColors(presenter->confirmColorValue(), touchgfx::Color::getColorFromRGB(0, 50, 66), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(4, 49, 94));
    }
}

void SketchpadViewBase::sliderValueChangedCallbackHandler(const touchgfx::Slider& src, int value)
{
    if (&src == &RedSlider)
    {
        //SetColorRedValue
        //When RedSlider value changed execute C++ code
        //Execute C++ code
        presenter->updateRedValue(value);
        Unicode::snprintf(RedValueBuffer, REDVALUE_SIZE, "%d", value);
        RedValue.invalidate();
        ColorConfirmBtn.setBoxWithBorderColors(presenter->getColorValue(), touchgfx::Color::getColorFromRGB(50, 50, 50), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(4, 49, 94));
        ColorConfirmBtn.invalidate();
    }
    if (&src == &GreenSlider)
    {
        //SetColorGreenValue
        //When GreenSlider value changed execute C++ code
        //Execute C++ code
        presenter->updateGreenValue(value);
        Unicode::snprintf(GreenValueBuffer, GREENVALUE_SIZE, "%d", value);
        GreenValue.invalidate();
        ColorConfirmBtn.setBoxWithBorderColors(presenter->getColorValue(), presenter->getColorValue(), presenter->getColorValue(), touchgfx::Color::getColorFromRGB(4, 49, 94));
        ColorConfirmBtn.invalidate();
    }
    if (&src == &Blueslider)
    {
        //SetColorBlueValue
        //When Blueslider value changed execute C++ code
        //Execute C++ code
        presenter->updateBlueValue(value);
        Unicode::snprintf(BlueValueBuffer, BLUEVALUE_SIZE, "%d", value);
        BlueValue.invalidate();
        ColorConfirmBtn.setBoxWithBorderColors(presenter->getColorValue(), touchgfx::Color::getColorFromRGB(50, 50, 50), touchgfx::Color::getColorFromRGB(0, 51, 102), touchgfx::Color::getColorFromRGB(4, 49, 94));
        ColorConfirmBtn.invalidate();
    }
}

void SketchpadViewBase::transitionBegins()
{
    //hideModalWindow
    //When screen transition begins hide ColorSetmodalWindow
    //Hide ColorSetmodalWindow
    ColorSetmodalWindow.setVisible(false);
    ColorSetmodalWindow.invalidate();
}
